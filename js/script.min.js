var feedback=document.querySelector(".contacts-info"),button=feedback.querySelector(".contacts-button"),wrap=document.querySelector(".modal-feedback-wrap"),modal=document.querySelector(".modal-feedback"),form=document.querySelector(".feedback-form"),close=document.querySelector(".modal-close"),userName=modal.querySelector("[name = user-name]"),userEmail=modal.querySelector("[name = email3]"),userText=modal.querySelector("[name = text-field]"),isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("userName"),storageEmail=localStorage.getItem("userEmail")}catch(e){isStorageSupport=!1}button.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal-feedback-show"),wrap.classList.add("modal-feedback-wrap-show"),storageName&&storageEmail?(userName.value=storageName,userEmail.value=storageEmail,userText.focus()):userName.focus()}),close.addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-feedback-show"),wrap.classList.remove("modal-feedback-wrap-show"),modal.classList.contains("modal-error")&&modal.classList.remove("modal-error")}),form.addEventListener("submit",function(e){userName.value&&userEmail.value&&userText.value?(isStorageSupport&&localStorage.setItem("userName",userName.value),isStorageSupport&&localStorage.setItem("userEmail",userEmail.value)):(e.preventDefault(),console.log("Заполните, пожалуйста, все поля"),modal.classList.remove("modal-error"),modal.offsetWidth=modal.offsetWidth,modal.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(modal.classList.contains("modal-feedback-show")&&modal.classList.remove("modal-feedback-show"),wrap.classList.contains("modal-feedback-wrap-show")&&wrap.classList.remove("modal-feedback-wrap-show"),modal.classList.contains("modal-error")&&modal.classList.remove("modal-error"))});
